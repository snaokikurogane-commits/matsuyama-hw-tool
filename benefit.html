<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>基本手当 目安額チェック</title>
    <style>
        body { 
            font-family: -apple-system, "Helvetica Neue", Arial, sans-serif; 
            background-color: #f0f4f8; 
            padding: 10px; margin: 0; display: flex; justify-content: center;
        }
        .card { 
            width: 100%; max-width: 480px; background: white; padding: 20px; 
            border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            box-sizing: border-box; margin-top: 10px;
            /* ヘッダーアクセント色を赤に変更 */
            border-top: 5px solid #d32f2f;
        }
        h2 { 
            /* タイトル文字色と下線を赤に変更 */
            color: #d32f2f; text-align: center; font-size: 1.3rem; 
            margin-top: 0; border-bottom: 2px solid #d32f2f; padding-bottom: 10px; 
        }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.9rem; font-weight: bold; margin-bottom: 5px; color: #333; }
        .sub-text { font-size: 0.75rem; color: #666; margin-bottom: 5px; }
        input, select { 
            width: 100%; padding: 12px; font-size: 16px; 
            border: 1px solid #ccd6e0; border-radius: 8px; box-sizing: border-box; color: #333;
        }
        
        /* 同意エリア */
        .agreement-box {
            background-color: #f9f9f9; padding: 15px; border-radius: 8px;
            border: 1px solid #ddd; margin-bottom: 15px;
        }
        .checkbox-label {
            display: flex; align-items: start; cursor: pointer; font-size: 0.9rem; font-weight: bold;
        }
        .checkbox-label input {
            width: 20px; height: 20px; margin-right: 10px; margin-top: 2px; flex-shrink: 0;
        }

        /* ボタン（無効時はグレー） */
        button { 
            width: 100%; padding: 16px; 
            background-color: #ccc; 
            color: white; border: none; border-radius: 8px; 
            font-size: 1.1rem; font-weight: bold; cursor: not-allowed;
            transition: background 0.3s;
        }
        /* 有効化時のスタイル（ここは共通で緑のまま） */
        button.active {
            background-color: #00b900; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        button.active:active { background-color: #008f00; }

        /* 結果エリア */
        .result-box { 
            margin-top: 20px; padding: 15px; background-color: #eef9ee; 
            border: 2px solid #c2e6c2; border-radius: 10px; display: none; 
        }
        .res-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.95rem; border-bottom: 1px dashed #c2e6c2; padding-bottom: 5px;}
        .res-val { font-weight: bold; color: #333; }
        .final-amount { font-size: 1.8rem; font-weight: 900; color: #d32f2f; text-align: center; margin-top: 5px; }
        
        /* フッター注釈 */
        .footer-note { 
            font-size: 0.75rem; color: #666; margin-top: 20px; 
            border-top: 1px solid #eee; padding-top: 15px; line-height: 1.6;
        }
        .disclaimer {
            background-color: #fff0f0; padding: 10px; border-radius: 6px;
            color: #d32f2f; margin-top: 10px; font-weight: bold; border: 1px solid #ffcccc;
        }
    </style>
</head>
<body>

<div class="card">
    <h2>失業給付 目安チェック</h2>

    <div class="input-group">
        <label>離職前6ヶ月間の給与総額</label>
        <div class="sub-text">※ボーナスを除く総支給額（残業代含む）</div>
        <input type="tel" id="totalWage" placeholder="例: 1800000" maxlength="8" oninput="formatWage(this)">
    </div>

    <div class="input-group">
        <label>離職時の年齢</label>
        <select id="ageGroup">
            <option value="under30">30歳未満</option>
            <option value="30to44" selected>30歳〜44歳</option>
            <option value="45to59">45歳〜59歳</option>
            <option value="60to64">60歳〜64歳</option>
        </select>
    </div>

    <div class="input-group">
        <label>給付日数（予定）</label>
        <select id="totalDays">
            <option value="90">90日</option><option value="120">120日</option><option value="150">150日</option>
            <option value="180">180日</option><option value="210">210日</option><option value="240">240日</option>
            <option value="270">270日</option><option value="300">300日</option><option value="330">330日</option><option value="360">360日</option>
        </select>
    </div>

    <div class="agreement-box">
        <label class="checkbox-label">
            <input type="checkbox" id="agreeCheck" onchange="toggleButton()">
            <span>この結果はあくまで目安であり、実際の決定額や支給を保証するものではないことに同意します。</span>
        </label>
    </div>

    <button id="calcBtn" onclick="runCalculation()" disabled>同意してチェックする</button>

    <div id="resultArea" class="result-box">
        <div class="res-row"><span>基本手当日額（1日分）</span> <span id="resBenefitDaily" class="res-val"></span></div>
        
        <div style="text-align:center; font-size:0.9rem; margin-top:15px; color:#d32f2f; font-weight:bold;">給付総額の目安</div>
        <div class="final-amount" id="resFinal">0 円</div>
        <div style="font-size:0.8rem; text-align:right; color:#666; margin-top:5px;">※端数切り捨て処理済み</div>
    </div>

    <div class="footer-note">
        <div style="font-weight:bold; color:#d32f2f; margin-bottom:5px;">※ハローワーク松山仕様（令和７年度基準）</div>
        
        ※正確な受給額・日数は離職票提出後に決定される「雇用保険受給資格者証」を必ずご確認ください。
        
        <div class="disclaimer">
            【免責事項】<br>
            本ツールによる計算結果は概算シミュレーションであり、実際の支給額とは異なります。<br>
            本ツールの利用によって生じたいかなる不利益やトラブルについても、当所は一切の責任を負いかねますのでご了承ください。
        </div>
    </div>
</div>

<script>
// カンマ区切りフォーマット
function formatWage(input) {
    let val = input.value.replace(/[０-９]/g, s => String.fromCharCode(s.charCodeAt(0) - 0xFEE0)).replace(/[^0-9]/g, "");
    if(val === "") { input.value = ""; return; }
    input.value = parseInt(val).toLocaleString();
}

// ボタン有効化切り替え
function toggleButton() {
    const checkbox = document.getElementById('agreeCheck');
    const btn = document.getElementById('calcBtn');
    if (checkbox.checked) {
        btn.disabled = false; btn.classList.add("active");
    } else {
        btn.disabled = true; btn.classList.remove("active");
    }
}

function runCalculation() {
    const totalWageInput = document.getElementById('totalWage').value.replace(/,/g, "");
    const totalWage = parseFloat(totalWageInput);
    const age = document.getElementById('ageGroup').value;
    const totalDays = parseInt(document.getElementById('totalDays').value);

    if (!totalWage) { alert("給与総額を入力してください"); return; }

    // 1. 賃金日額
    const wageDaily = totalWage / 180;

    // 2. 基本手当日額 (R7スライド制)
    const wLow = 2730; const wHigh = 12760;
    let benefitDaily = 0;

    if (age !== "60to64") {
        if (wageDaily < wLow) benefitDaily = wageDaily * 0.8;
        else if (wageDaily <= wHigh) benefitDaily = 0.8 * wageDaily - ((0.3 * (wageDaily - wLow) / (wHigh - wLow)) * wageDaily);
        else benefitDaily = wageDaily * 0.5;
    } else {
        if (wageDaily < wLow) benefitDaily = wageDaily * 0.8;
        else if (wageDaily <= wHigh) benefitDaily = 0.8 * wageDaily - ((0.35 * (wageDaily - wLow) / (wHigh - wLow)) * wageDaily);
        else benefitDaily = wageDaily * 0.45;
    }

    // 3. 上限適用
    let cap = 0;
    if (age === "under30") cap = 7255;
    else if (age === "30to44") cap = 8055;
    else if (age === "45to59") cap = 8870;
    else if (age === "60to64") cap = 7623;
    
    if (benefitDaily > cap) benefitDaily = cap;

    // 【対策】金額の「丸め」処理
    // 日額は100円未満切り捨て（例：5,832円 → 5,800円）
    const safeBenefitDaily = Math.floor(benefitDaily / 100) * 100;
    
    // 総額は1,000円未満切り捨て
    const totalAmount = safeBenefitDaily * totalDays;
    const safeTotalAmount = Math.floor(totalAmount / 1000) * 1000;

    // 表示（「約」をつける）
    document.getElementById('resBenefitDaily').innerText = "約 " + safeBenefitDaily.toLocaleString() + " 円";
    document.getElementById('resFinal').innerText = "約 " + safeTotalAmount.toLocaleString() + " 円";
    
    document.getElementById('resultArea').style.display = "block";
}
</script>
</body>
</html>
